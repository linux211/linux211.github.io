<html xmlns="http://www.w3.org/1999/xhtml">
 <head> 
  <title>EXERCISE</title> 
  <meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
  <script type="text/javascript" src="index.files/jquery.min.js">
    </script> 
  <script type="text/javascript" src="index.files/jquery.snippet.js">
    </script> 
  <script type="text/javascript" src="index.files/main.js">
    </script> 
  <link type="text/css" href="index.files/index.css" rel="Stylesheet" /> 
  <link type="text/css" href="index.files/jquery.snippet.css" rel="Stylesheet" /> 
  <script>window.onload=function(){var hobj=document.getElementsByTagName('h3');for(var i=0;i<hobj.length;i++){hobj[i].innerHTML=hobj[i].innerHTML.substring(2);}};</script> 
 </head> 
 <body> 
  <div class="source_style_exercise"> 
   <div> 
    <h3>1 配置新建用户时的属性限制。</h3> 
    <p>对于新创建的用户，要求其密码最长使用时间为60天，密码最短使用时间为1天，在密码过期前7天内发出警告。</p> 
    <p class="answerTitle">参考答案</p> 
    <pre class="code">[root@svr5 ~]# vim /etc/login.defsPASS_MAX_DAYS   60PASS_MIN_DAYS   1PASS_WARN_AGE   7</pre> 
   </div> 
   <div> 
    <h3>2 利用su命令切换用户身份。</h3> 
    <p>1）使用su以用户mike的身份创建文件/tmp/mike.txt。</p> 
    <p>2）使用su以用户jerry的身份列出最近10条历史命令，保存为~/h10.txt文件。</p> 
    <p class="answerTitle">参考答案</p> 
    <p>1）使用su以用户mike的身份创建文件/tmp/mike.txt。</p> 
    <pre class="code">[root@svr5 ~]# su - mike -c &quot;touch /tmp/mike.txt&quot;[root@svr5 ~]# ls -lh /tmp/mike.txt -rw-rw-r--. 1 mike mike 0 5月  17 12:35 /tmp/mike.txt</pre> 
    <p>2）使用su以用户jerry的身份列出最近10条历史命令，保存为~/h10.txt文件。</p> 
    <pre class="code">[root@svr5 ~]# su - jerry -c &quot;tail ~/.bash_history &gt; ~/h10.txt&quot;[root@svr5 ~]# ls -lh ~jerry/h10.txt -rw-rw-r--. 1 jerry jerry 152 5月  17 12:39 /home/jerry/h10.txt</pre> 
   </div> 
   <div> 
    <h3>3 通过sudo机制为普通用户提权。</h3> 
    <p>创建bob和alice两个用户，要求这两个用户不切换成管理员即可以执行如下命令：useradd/usermod/userdel/passwd，其中利用passwd可以修改其他用户密码。</p> 
    <p class="answerTitle">参考答案</p> 
    <pre class="code">[root@svr5 ~]# useradd bob[root@svr5 ~]# useradd alice[root@svr5 ~]# visudoUser_Alias USER_ADMINS = bob, aliceCmnd_Alias USER_OP = /usr/sbin/useradd, /usr/bin/passwd, /usr/sbin/usermod, /usr/sbin/userdelUSER_ADMINS        ALL=(ALL)      USER_OP</pre> 
   </div> 
   <div> 
    <h3>4 阅读下列SSH配置，在括号内注明含义。</h3> 
    <pre class="code">[root@svr5 ~]# vim /etc/ssh/sshd_config.. ..Protocol  2      				//（        ）PermitRootLogin  no  			//（        ）UseDNS  no       				//（        ）MaxAuthTries  6   				//（        ）</pre> 
    <p class="answerTitle">参考答案</p> 
    <pre class="code">[root@svr5 ~]# vim /etc/ssh/sshd_config.. ..Protocol  2      				//（指定SSH协议使用第二版本）PermitRootLogin  no  			//（不允许以root身份登录）UseDNS  no       				//（不进行DNS反向解析，以提高响应速度）MaxAuthTries  6   				//（限定最大密码错误次数）</pre> 
   </div> 
   <div> 
    <h3>5 简述实现SSH密钥对验证的基本过程。</h3> 
    <p class="answerTitle">参考答案</p> 
    <p>1）用户在客户端生成密钥对；</p> 
    <p>2）用户将公钥上传至目标服务器；</p> 
    <p>3）在服务器上将用户上传的公钥导入到指定用户的~/.ssh/authorized_keys中；</p> 
    <p>4）客户端连接验证。</p> 
   </div> 
   <div> 
    <h3>6 配置SSH密钥对验证，实现免密码的安全登录。</h3> 
    <p>客户端用户bob需要以alice身份用SSH协议登录到IP地址为192.168.4.205的服务器，请写出SSH基于密钥认证的步骤。</p> 
    <p class="answerTitle">参考答案</p> 
    <p>1）用户bob在客户端创建密钥对</p> 
    <pre class="code">[bob@svr5 ~]$ ssh-keygenEnter passphrase (empty for no passphrase):  			//直接回车确认Enter same passphrase again:   						//直接回车确认.. ..</pre> 
    <p>2）用户bob将SSH公钥部署到远程主机192.168.4.205</p> 
    <pre class="code">[bob@svr5 ~]$ ssh-copy-id alice@192.168.4.205alice@192.168.4.205's password:Now try .. ..  check in:       .ssh/authorized_keys.. ..</pre> 
    <p>3）验证免密码的SSH登录效果</p> 
    <pre class="code">[bob@svr5 ~]$ ssh alice@192.168.4.205[alice@pc205 ~]$ whoamialice</pre> 
   </div> 
  </div>  
 </body>
</html>